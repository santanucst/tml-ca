<div class="page-container">
  <div>
    <ol class="breadcrumb breadcrumb-custom">
      <li class="breadcrumb-item">
        <a href="#/home">
          <i class="fa fa-home"></i> Home </a>
      </li>
      <li class="breadcrumb-item active">{{title}}</li>
    </ol>
  </div>

   <!--start process flow div-->
   <div class="col-xs-12 col-sm-12 col-md-12 col-lg-12 step-row" style="padding-left: 30px;padding-right: 30px;">
    <ng-container *ngFor="let processData of processFlowData;let i = index;">
      <!-- start div for active step -->
      <div class="step-active step-col" style="display:inline-block;width: 16%;" *ngIf="i == processFlowPageIndex">
        <p style="padding-top: 8px;text-align:center;color: white;font-size: 20px;" *ngIf="i == processFlowPageIndex">
          <a style="color:white" [href]="processData.processUrl">{{processData.processName}}</a>
        </p>
      </div>
      <!-- end of div for active step -->
      <!-- start div for inactive step -->
      <div class="step-inactive step-col" style="display:inline-block;width: 16%;" *ngIf="i > processFlowPageIndex">
        <p style="padding-top: 8px;text-align:center;color: #5a5d5f;font-size: 20px;" *ngIf="i > processFlowPageIndex">
          <a [href]="processData.processUrl">{{processData.processName}}</a>
        </p>
      </div>
    </ng-container>
  </div>  
  <!-- end div of process flow  -->
    
  <!-- main div -->
  <div class="form-div-style">
     <!-- start table div -->
     <div class="col-lg-12 col-md-12 col-xs-12 scroll-bar grid-table-style" style="margin-bottom: 15px; margin-top: 5px;">
        <table class="table-style">
          <thead>
            <tr class="th-style">
              <td class="hideextra" *ngFor="let invRprt of  invReportTable" [ngClass]="invRprt.headerClass" >
                  {{ invRprt.headerDesc }}
              </td>
            </tr>
          </thead>
          <tbody>
            <ng-container>
              <!-- <tr class="tr-style" *ngFor=" let invoiceDet of complaintReferenceDetailsForModify.itemNos?.items
            let odd = odd; let even = even;" [ngClass]="{even: even, odd: odd }">
                <td class="td-style-first">
                  {{invoiceDet.invoiceNo}}
                </td>
                <td class="td-style hideextra">
                  {{invoiceDet.invoiceDate|date: 'dd-MMM-yyyy'}}
                </td>
                <td class="td-style hideextra">
                  {{invoiceDet.itemCode}}
                </td>
                <td class="td-style hideextra">
                  {{invoiceDet.itemName}}
                </td>
                <td class="td-style hideextra">
                  {{invoiceDet.customerCode}}
                </td>
                <td class="td-style hideextra">
                  {{invoiceDet.customerName}}
                </td>
                <td class="td-style hideextra">
                  {{invoiceDet.projectName}}
                </td>
                <td class="td-style hideextra">
                  {{invoiceDet.projectLocation}}
                </td>
                <td class="td-style hideextra">
                  {{invoiceDet.poNo}}
                </td>
                <td class="td-style-last hideextra">
                  {{invoiceDet.soNo}}
                </td>
              </tr> -->
              <tr class="tr-style">
                  <td class="td-style-first hideextra">
                    &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; Add Item(s)
                    <i style="font-size:16px;cursor: pointer;" title="Click here" class="fa fa-plus-circle" (click)="onAddItemOpenModal()"></i>
                  </td>
                  <td class="td-style">

                  </td>
                  <td class="td-style">

                  </td>
                  <td class="td-style">

                  </td>
                  <td class="td-style">

                  </td>
                  <td class="td-style-last">

                  </td>
                </tr>
            </ng-container>
          </tbody>
        </table>
      </div>
      <!--end table div-->


    <!--start form -->
    <form [formGroup]="preliInvestFormGroup" autocomplete="off" (ngSubmit)="onClickPreliInvestigationReportDISubmit()">
      <!--start div of row manage profile form-->
      <div class="row inv-report-form-style">

        <!-- start div for Complaint Reference No -->
        <!-- <div class="form-group col-xs-12 col-sm-6 col-md-6 col-lg-4" *ngIf="complaintRefNoForUpdate==''">
          <label for="complaintRefNo">Complaint Reference No</label>
          <select class="custom-select col-xs-12 col-sm-6 col-md-6 col-lg-4" formControlName="complaintRefNo" (change)="onChangeComplaintRefNo($event.target.value)"
            required>
            <option *ngFor="let compRefNo of complaintRefNoVal.details" value="{{compRefNo.Key}}">{{compRefNo.Value}}</option>
          </select> -->
          <!--start div for complaintRefNo alert-->
          <!-- <div class="alert alert-danger" *ngIf="preliInvestFormGroup.get('complaintRefNo').hasError('required') && preliInvestFormGroup.get('complaintRefNo').touched">
            <i class="fa fa-exclamation-circle"></i> Complaint Reference No is required!
          </div> -->
          <!--end div for complaintRefNo alert-->
        <!-- </div> -->
        <!-- end div for Complaint Reference No -->

        <!-- start div for Complaint Reference No -->
        <div class="form-group col-xs-12 col-sm-6 col-md-6 col-lg-4">
            <label>Complaint Reference No</label>
            <input type="text" class="form-control"  readonly>
          </div>
          <!-- end div for Complaint Reference No -->

        <!-- start div for Complaint Reference No [modify] -->
        <div class="form-group col-xs-12 col-sm-6 col-md-6 col-lg-4" *ngIf="complaintRefNoForUpdate">
          <label for="complaintRefNo">Complaint Reference No </label>
          <input type="text" class="form-control" formControlName="complaintRefNoForModify" value="{{complaintRefNoForModify}}" readonly>
        </div>
        <!-- end div for Complaint Reference No [modify] -->

        <!-- start div of Site Visit Made radio button -->
        <div class="form-group col-xs-12 col-sm-6 col-md-6 col-lg-4">
          <ng-container *ngIf="invReportVar.siteVisitMadeValue ==''">
            <div style="display:inline-block;">
              <label>Site Visit Made</label>
              <label class="red-asterick">*</label>
              <label class="control control--radio">Yes
                <input type="radio" name="siteVisitMade" formControlName="siteVisitMade" [value]="Y" (click)="onRadioClick('Y','siteVisitMade')" />
                <div class="control__indicator"></div>
              </label>
            </div>
            <div style="display:inline-block;">
              <label class="control control--radio">No
                <input type="radio" name="siteVisitMade" formControlName="siteVisitMade" [value]="N" (click)="onRadioClick('N','siteVisitMade')" />
                <div class="control__indicator"></div>
              </label>
            </div>
          </ng-container>
          <ng-container *ngIf="invReportVar.siteVisitMadeValue =='Y'">
            <div style="display:inline-block;">
              <label>Site Visit Made</label>
              <label class="red-asterick">*</label>
              <label class="control control--radio">Yes
                <input type="radio" name="siteVisitMade" formControlName="siteVisitMade" [value]="Y" [checked]=true (click)="onRadioClick('Y','siteVisitMade')" />
                <div class="control__indicator"></div>
              </label>
            </div>
            <div style="display:inline-block;">
              <label class="control control--radio">No
                <input type="radio" name="siteVisitMade" formControlName="siteVisitMade" [value]="N" (click)="onRadioClick('N','siteVisitMade')" />
                <div class="control__indicator"></div>
              </label>
            </div>
          </ng-container>
          <ng-container *ngIf="invReportVar.siteVisitMadeValue =='N'">
            <div style="display:inline-block;">
              <label>Site Visit Made</label>
              <label class="red-asterick">*</label>
              <label class="control control--radio">Yes
                <input type="radio" name="siteVisitMade" formControlName="siteVisitMade" [value]="Y" (click)="onRadioClick('Y','siteVisitMade')" />
                <div class="control__indicator"></div>
              </label>
            </div>
            <div style="display:inline-block;">
              <label class="control control--radio">No
                <input type="radio" name="siteVisitMade" formControlName="siteVisitMade" [value]="N" [checked]=true (click)="onRadioClick('N','siteVisitMade')" />
                <div class="control__indicator"></div>
              </label>
            </div>
          </ng-container>
          </div>
          <!-- end div of Site Visit Made requied -->


        <!-- start div for site visit Date -->
        <ng-container *ngIf="invReportVar.siteVisitMadeValue === 'Y'">
          <div class="form-group col-xs-12 col-sm-6 col-md-6 col-lg-4">
            <label for="siteVisitDate">Site Visit Date</label>
            <input type="date" class="form-control" [value]="siteVisitDt|date: 'dd-MMM-yyyy'" formControlName="siteVisitDate">
            <div class="alert alert-danger" *ngIf="preliInvestFormGroup.get('siteVisitDate').touched && preliInvestFormGroup.get('siteVisitDate').hasError('required')">
              <i class="fa fa-exclamation-circle"></i> Site Visit Date is required!
            </div>
          </div>
        </ng-container>
        <!-- end div for site visit Date -->

        <!-- start div of Sample Collected radio button -->
        <div class="form-group col-xs-12 col-sm-6 col-md-6 col-lg-4">
          <ng-container *ngIf="invReportVar.sampleCollectedValue ==''">
            <div style="display:inline-block;">
              <label>Sample Collected</label>
              <label class="red-asterick">*</label>
              <label class="control control--radio">Yes
                <input type="radio" name="sampleColleted" formControlName="sampleColleted" [value]="Y" (click)="onRadioClick('Y','sampleColleted')" />
                <div class="control__indicator"></div>
              </label>
            </div>
            <div style="display:inline-block;">
              <label class="control control--radio">No
                <input type="radio" name="sampleColleted" formControlName="sampleColleted" [value]="N" (click)="onRadioClick('N','sampleColleted')" />
                <div class="control__indicator"></div>
              </label>
            </div>
          </ng-container>
          <ng-container *ngIf="invReportVar.sampleCollectedValue =='Y'">
            <div style="display:inline-block;">
              <label>Sample Collected</label>
              <label class="red-asterick">*</label>
              <label class="control control--radio">Yes
                <input type="radio" name="sampleColleted" formControlName="sampleColleted" [value]="Y" [checked]=true (click)="onRadioClick('Y','sampleColleted')" />
                <div class="control__indicator"></div>
              </label>
            </div>
            <div style="display:inline-block;">
              <label class="control control--radio">No
                <input type="radio" name="sampleColleted" formControlName="sampleColleted" [value]="N" (click)="onRadioClick('N','sampleColleted')" />
                <div class="control__indicator"></div>
              </label>
            </div>
          </ng-container>
          <ng-container *ngIf="invReportVar.sampleCollectedValue =='N'">
            <div style="display:inline-block;">
              <label>Sample Collected</label>
              <label class="red-asterick">*</label>
              <label class="control control--radio">Yes
                <input type="radio" name="sampleColleted" formControlName="sampleColleted" [value]="Y" (click)="onRadioClick('Y','sampleColleted')" />
                <div class="control__indicator"></div>
              </label>
            </div>
            <div style="display:inline-block;">
              <label class="control control--radio">No
                <input type="radio" name="sampleColleted" formControlName="sampleColleted" [value]="N" [checked]=true (click)="onRadioClick('N','sampleColleted')" />
                <div class="control__indicator"></div>
              </label>
            </div>
          </ng-container>
          </div>
          <!-- end div of Sample Collected-->


        <!-- start div for Sample Collected Date -->
        <ng-container *ngIf="invReportVar.sampleCollectedValue === 'Y'">
          <div class="form-group col-xs-12 col-sm-6 col-md-6 col-lg-4">
            <label for="sampleColletedDate">Sample Collected Date</label>
            <input type="date" class="form-control" [value]="sampleColletedDate|date: 'dd-MMM-yyyy'" formControlName="sampleColletedDate">
            <div class="alert alert-danger" *ngIf="preliInvestFormGroup.get('sampleColletedDate').touched && preliInvestFormGroup.get('sampleColletedDate').hasError('required')">
              <i class="fa fa-exclamation-circle"></i> Sample Collected Date is required!
            </div>
          </div>
        </ng-container>
        <!-- end div for Sample Collected Date -->


        <!-- start div for Date -->
        <div class="form-group col-xs-12 col-sm-6 col-md-6 col-lg-4">
          <label for="preliDate">Date</label>
          <input type="text" class="form-control" formControlName="preliDate" [value]="preliDate|date: 'dd-MMM-yyyy'" readonly>
        </div>
        <!-- end div for Date -->

         <!-- start table div -->
         <div class="col-lg-12 col-md-12 col-xs-12 scroll-bar" style="margin-bottom: 15px; margin-top: 5px;" *ngIf="complaintReferenceDetailsForModify.itemsHeader">
          <table class="table-style">
            <thead>
              <tr class="th-style">
                <td class="header-style-first hideextra">
                  {{complaintReferenceDetailsForModify.itemsHeader?.invoiceNo}}
                </td>
                <td class="header-style hideextra">
                  {{complaintReferenceDetailsForModify.itemsHeader?.invoiceDate}}
                </td>
                <td class="header-style hideextra">
                  {{complaintReferenceDetailsForModify.itemsHeader?.itemCode}}
                </td>
                <td class="header-style hideextra">
                  {{complaintReferenceDetailsForModify.itemsHeader?.itemName}}
                </td>
                <td class="header-style hideextra">
                  {{complaintReferenceDetailsForModify.itemsHeader?.customerCode}}
                </td>
                <td class="header-style hideextra">
                  {{complaintReferenceDetailsForModify.itemsHeader?.customerName}}
                </td>
                <td class="header-style hideextra">
                  {{complaintReferenceDetailsForModify.itemsHeader?.projectName}}
                </td>
                <td class="header-style hideextra">
                  {{complaintReferenceDetailsForModify.itemsHeader?.projectLocation}}
                </td>
                <td class="header-style hideextra">
                  {{complaintReferenceDetailsForModify.itemsHeader?.poNo}}
                </td>
                <td class="header-style-last hideextra">
                  {{complaintReferenceDetailsForModify.itemsHeader?.soNo}}
                </td>
              </tr>
            </thead>
            <tbody>
              <ng-container>
                  <tr class="tr-style">
                      <td class="td-style-first hideextra">
                        &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; Add Item(s)
                        <i style="font-size:16px;cursor: pointer;" title="Click here" class="fa fa-plus-circle" (click)="onAddItemOpenModal()"></i>
                      </td>
                      <td class="td-style">
  
                      </td>
                      <td class="td-style">
  
                      </td>
                      <td class="td-style">
  
                      </td>
                      <td class="td-style">
  
                      </td>
                      <td class="td-style">
  
                      </td>
                      <td class="td-style">
  
                      </td>
                      <td class="td-style">
  
                      </td>
                      <td class="td-style">
  
                      </td>
                      <td class="td-style-last">
  
                      </td>
                    </tr>
                <!-- <tr class="tr-style" *ngFor=" let invoiceDet of complaintReferenceDetailsForModify.itemNos?.items
              let odd = odd; let even = even;" [ngClass]="{even: even, odd: odd }">
                  <td class="td-style-first">
                    {{invoiceDet.invoiceNo}}
                  </td>
                  <td class="td-style hideextra">
                    {{invoiceDet.invoiceDate|date: 'dd-MMM-yyyy'}}
                  </td>
                  <td class="td-style hideextra">
                    {{invoiceDet.itemCode}}
                  </td>
                  <td class="td-style hideextra">
                    {{invoiceDet.itemName}}
                  </td>
                  <td class="td-style hideextra">
                    {{invoiceDet.customerCode}}
                  </td>
                  <td class="td-style hideextra">
                    {{invoiceDet.customerName}}
                  </td>
                  <td class="td-style hideextra">
                    {{invoiceDet.projectName}}
                  </td>
                  <td class="td-style hideextra">
                    {{invoiceDet.projectLocation}}
                  </td>
                  <td class="td-style hideextra">
                    {{invoiceDet.poNo}}
                  </td>
                  <td class="td-style-last hideextra">
                    {{invoiceDet.soNo}}
                  </td>
                  </tr> -->
                </ng-container>
            </tbody>
          </table>
        </div>
        <!--end table div-->

        <!--start div for Unloading Equipment [add]-->
        <div class="form-group col-xs-12 col-sm-6 col-md-6 col-lg-4" >
          <label >Unloading Equipment</label>
          <ul class="list-group ul-style">
            <li class="list-group-item li-style" *ngFor="let lubrication of lubricationVal.details">
              <label class="custom-control custom-checkbox">
                <input type="checkbox" class="custom-control-input" formControlName="unloadingEquipment" (click)="onclickLoadingRelatedCheck(loadingRelated.Key)"
                />
                <span class="custom-control-indicator"></span>
                <span class="custom-control-description">
                  {{ lubrication.Value }}
                </span>
              </label>
            </li>
          </ul>
        </div>
        <!--end div for Unloading Equipment [add]-->

         <!--start div for Lubricant Used [add]-->
         <div class="form-group col-xs-12 col-sm-6 col-md-6 col-lg-4">
          <label>Lubricant Used</label>
          <ul class="list-group ul-style">
            <li class="list-group-item li-style" *ngFor="let lubrication of lubricationVal.details">
              <label class="custom-control custom-checkbox">
                <input type="checkbox" class="custom-control-input" formControlName="lubricantUsed" (click)="onclickLoadingRelatedCheck(loadingRelated.Key)"
                />
                <span class="custom-control-indicator"></span>
                <span class="custom-control-description">
                  {{ lubrication.Value }}
                </span>
              </label>
            </li>
          </ul>
        </div>
        <!--end div for Lubricant Used [add]-->

        <!--start div for Unloading Equipment [add]-->
        <div class="form-group col-xs-12 col-sm-6 col-md-6 col-lg-4">
          <label for="stencil">Laying Position</label>
          <ul class="list-group ul-style">
            <li class="list-group-item li-style" *ngFor="let lubrication of lubricationVal.details">
              <label class="custom-control custom-checkbox">
                <input type="checkbox" class="custom-control-input" formControlName="layingPosiion"  (click)="onclickLoadingRelatedCheck(loadingRelated.Key)"
                />
                <span class="custom-control-indicator"></span>
                <span class="custom-control-description">
                  {{ lubrication.Value }}
                </span>
              </label>
            </li>
          </ul>
        </div>
        <!--end div for Unloading Equipment [add]-->

        <!--start div for Unloading Equipment [add]-->
        <div class="form-group col-xs-12 col-sm-6 col-md-6 col-lg-4">
          <label for="stencil">Jointing Type</label>
          <ul class="list-group ul-style">
            <li class="list-group-item li-style" *ngFor="let lubrication of lubricationVal.details">
              <label class="custom-control custom-checkbox">
                <input type="checkbox" class="custom-control-input" formControlName="jointingtype" (click)="onclickLoadingRelatedCheck(loadingRelated.Key)"
                />
                <span class="custom-control-indicator"></span>
                <span class="custom-control-description">
                  {{ lubrication.Value }}
                </span>
              </label>
            </li>
          </ul>
        </div>
        <!--end div for Unloading Equipment [add]-->

        <!--start div for show files-->
        <!--files-->
        <div class="form-group col-xs-12 col-sm-6 col-md-6 col-lg-4" *ngIf="complaintRefNoForUpdate">
          <label>Uploaded file(s)</label>
          <div *ngFor="let file of complaintReferenceDetailsForModify.files">
            <a href="{{file.fileUrl}}" target="_blank">{{file.fileName}}</a>
            <br/>
          </div>
        </div>
        <!--end div for show files-->

        <!--start fle upload div-->
        <div class="form-group col-xs-12 col-sm-6 col-md-6 col-lg-6">
          <label for="imageFile">File(s) Upload</label>
          <label class="red-coloured-label">(max size 100 mb)</label>
          <input type="file" (change)="fileChange($event)" multiple/>
        </div>
        <!--end of file upload div-->



        <!--start button div-->
        <div class="col-xs-12 col-sm-12 col-md-12 col-lg-12">
          <div class="col-xs-12 col-sm-4 col-md-4 col-lg-2 button-holder">
            <button type="submit" class="btn btn-primary primary-button-style" [disabled]="!preliInvestFormGroup.valid">Submit
            </button>
          </div>
          <div class="col-xs-12 col-sm-4 col-md-4 col-lg-2 button-holder">
            <button type="submit" class="btn default-button-style" (click)="onCancel()">
              Cancel
            </button>
          </div>
        </div>
        <!--end of button div-->


      </div>
      <!--end of div row manage profile form-->
    </form>
    <!--end form -->

    <!-- error msg div -->
    <div class="col-lg-12 col-md-12 col-sm-12 col-xs-12" *ngIf="resMsgType == errorConst">
      <div class="alert alert-danger">
        {{resErrorMsg}}&nbsp;
        <button aria-label="Close" class="close" type="button" (click)="deleteResErrorMsgOnClick(resMsgType)">
          <span aria-hidden="true">×</span>
        </button>
      </div>
      <br/>
      <br/>
    </div>
    <!-- end of error msg div -->

  </div>
  <!-- end of main div -->
</div>
<!--end of page-container-->

<!--spinner-->
<ispl-busy-spinner *ngIf="busySpinner.busy">

</ispl-busy-spinner>