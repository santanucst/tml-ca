<div class="page-container">
  <div>
    <ol class="breadcrumb breadcrumb-custom">
      <li class="breadcrumb-item">
        <a href="#/home">
          <i class="fa fa-home"></i> Home </a>
      </li>
      <li class="breadcrumb-item active">{{title}}</li>
    </ol>
  </div>
  <!--start process flow div-->
  <app-flowmangement [complainNo]="complaintReferenceNo" [complianStatus]="complaintStatus" [pageType]="'add'"></app-flowmangement>
  <!-- end div of process flow  -->

  <!-- main div -->
  <div>
    <!-- main div -->
    <div class="form-div-style">
      <!-- start table div -->
      <div *ngIf="invReportDetails.length > 1 && prevInvReportShowFlag" class="col-lg-12 col-md-12 col-xs-12 scroll-bar prev-inv-report-table-style" >
        <table class="table-style">
          <thead>
            <tr class="th-style">
              <td class="header-style-first">Select</td>
              <td class="hideextra" *ngFor="let invRprt of  invReportTable" [ngClass]="invRprt.headerClass">
                {{ invRprt.headerDesc }}
              </td>
            </tr>
          </thead>
          <tbody>
            <tr class="tr-style" *ngFor="let invReportDet of invReportDetails; let invRepIndex = index;">
              <td class="td-style-first" style="cursor: pointer;" (click)="selectData(invRepIndex)">
                <i class="fa" [ngClass]="invReportIndex == invRepIndex ? 'fa-dot-circle-o' : 'fa-circle-o'"></i>
              </td>

              <td class="hideextra" *ngFor="let invRprt of invReportTable" [ngClass]="invRprt.dataClass">
                {{ invReportDet[invRprt.headerKey] }}
              </td>
            </tr>
          </tbody>
        </table>
      </div>
      <!--end table div-->


      <!-- start div of form -->
      <div style="margin-top: 10px; margin-bottom: 30px;">
        <!--start form -->
        <form [formGroup]="invReportFormGroup" autocomplete="off" (ngSubmit)="investigationReportDISubmit()">
          <!--start div of row manage profile form-->
          <div class="row inv-report-form-style">

            <!-- start div for Complaint Reference No -->
            <div class="form-group col-xs-12 col-sm-6 col-md-6 col-lg-4">
              <label>Complaint Reference No</label>
              <input type="text" class="form-control" formControlName="complaintReferenceNo" readonly>
            </div>
            <!-- end div for Complaint Reference No -->



            <!-- start div of Sample Collected radio button -->
            <div class="form-group col-xs-12 col-sm-6 col-md-6 col-lg-4">
              <ng-container *ngIf="invReportVar.siteVisitMadeValue ==''">
                <div style="display:inline-block;">
                  <label>Site Visit Made</label>
                  <label class="red-asterick">*</label>
                  <label class="control control--radio">Yes
                    <input type="radio" name="siteVisit" formControlName="siteVisit" (click)="onRadioClick('Y','siteVisit')" />
                    <div class="control__indicator"></div>
                  </label>
                </div>
                <div style="display:inline-block;">
                  <label class="control control--radio">No
                    <input type="radio" name="siteVisit" formControlName="siteVisit" (click)="onRadioClick('N','siteVisit')" />
                    <div class="control__indicator"></div>
                  </label>
                </div>
              </ng-container>
              <ng-container *ngIf="invReportVar.siteVisitMadeValue =='Y'">
                <div style="display:inline-block;">
                  <label>Site Visit Made</label>
                  <label class="red-asterick">*</label>
                  <label class="control control--radio">Yes
                    <input type="radio" name="siteVisit" formControlName="siteVisit" [checked]=true (click)="onRadioClick('Y','siteVisit')" />
                    <div class="control__indicator"></div>
                  </label>
                </div>
                <div style="display:inline-block;">
                  <label class="control control--radio">No
                    <input type="radio" name="siteVisit" formControlName="siteVisit" (click)="onRadioClick('N','siteVisit')" />
                    <div class="control__indicator"></div>
                  </label>
                </div>
              </ng-container>
              <ng-container *ngIf="invReportVar.siteVisitMadeValue =='N'">
                <div style="display:inline-block;">
                  <label>Site Visit Made</label>
                  <label class="red-asterick">*</label>
                  <label class="control control--radio">Yes
                    <input type="radio" name="siteVisit" formControlName="siteVisit" (click)="onRadioClick('Y','siteVisit')" />
                    <div class="control__indicator"></div>
                  </label>
                </div>
                <div style="display:inline-block;">
                  <label class="control control--radio">No
                    <input type="radio" name="siteVisit" formControlName="siteVisit" [checked]=true (click)="onRadioClick('N','siteVisit')" />
                    <div class="control__indicator"></div>
                  </label>
                </div>
              </ng-container>
            </div>
            <!-- end div of Sample Collected-->


            <!-- start div for Site Visit Date -->
            <ng-container *ngIf="invReportVar.siteVisitMadeValue === 'Y'">
              <div class="form-group col-xs-12 col-sm-6 col-md-6 col-lg-4">
                <label for="siteVisitDt">Site Visit Date</label>
                <input type="date" class="form-control" formControlName="siteVisitDt">
                <div class="alert alert-danger" *ngIf="invReportFormGroup.get('siteVisitDt').touched && invReportFormGroup.get('siteVisitDt').hasError('required')">
                  <i class="fa fa-exclamation-circle"></i> Site Visit Date is required!
                </div>
              </div>
            </ng-container>
            <!-- end div for Site Visit Date -->

            <!-- start div of Sample Collected radio button -->
            <div class="form-group col-xs-12 col-sm-6 col-md-6 col-lg-4">
              <ng-container *ngIf="invReportVar.sampleCollectedValue ==''">
                <div style="display:inline-block;">
                  <label>Sample Collected</label>
                  <label class="red-asterick">*</label>
                  <label class="control control--radio">Yes
                    <input type="radio" name="sampleCollected" formControlName="sampleCollected" (click)="onRadioClick('Y','sampleCollected')"
                    />
                    <div class="control__indicator"></div>
                  </label>
                </div>
                <div style="display:inline-block;">
                  <label class="control control--radio">No
                    <input type="radio" name="sampleCollected" formControlName="sampleCollected" (click)="onRadioClick('N','sampleCollected')"
                    />
                    <div class="control__indicator"></div>
                  </label>
                </div>
              </ng-container>
              <ng-container *ngIf="invReportVar.sampleCollectedValue =='Y'">
                <div style="display:inline-block;">
                  <label>Sample Collected</label>
                  <label class="red-asterick">*</label>
                  <label class="control control--radio">Yes
                    <input type="radio" name="sampleCollected" formControlName="sampleCollected" [checked]=true (click)="onRadioClick('Y','sampleCollected')"
                    />
                    <div class="control__indicator"></div>
                  </label>
                </div>
                <div style="display:inline-block;">
                  <label class="control control--radio">No
                    <input type="radio" name="sampleCollected" formControlName="sampleCollected" (click)="onRadioClick('N','sampleCollected')"
                    />
                    <div class="control__indicator"></div>
                  </label>
                </div>
              </ng-container>
              <ng-container *ngIf="invReportVar.sampleCollectedValue =='N'">
                <div style="display:inline-block;">
                  <label>Sample Collected</label>
                  <label class="red-asterick">*</label>
                  <label class="control control--radio">Yes
                    <input type="radio" name="sampleCollected" formControlName="sampleCollected" (click)="onRadioClick('Y','sampleCollected')"
                    />
                    <div class="control__indicator"></div>
                  </label>
                </div>
                <div style="display:inline-block;">
                  <label class="control control--radio">No
                    <input type="radio" name="sampleCollected" formControlName="sampleCollected" [checked]=true (click)="onRadioClick('N','sampleCollected')"
                    />
                    <div class="control__indicator"></div>
                  </label>
                </div>
              </ng-container>
            </div>
            <!-- end div of Sample Collected-->


            <!-- start div for Sample Collected Date -->
            <ng-container *ngIf="invReportVar.sampleCollectedValue === 'Y'">
              <div class="form-group col-xs-12 col-sm-6 col-md-6 col-lg-4">
                <label for="sampleCollectedDate">Sample Collected Date</label>
                <input type="date" class="form-control" formControlName="sampleCollectedDate">
                <div class="alert alert-danger" *ngIf="invReportFormGroup.get('sampleCollectedDate').touched && invReportFormGroup.get('sampleCollectedDate').hasError('required')">
                  <i class="fa fa-exclamation-circle"></i> Sample Collected Date is required!
                </div>
              </div>
            </ng-container>
            <!-- end div for Sample Collected Date -->


            <!-- start div for Investigation Report Date -->
            <div class="form-group col-xs-12 col-sm-6 col-md-6 col-lg-4">
              <label>Investigation Report Date</label>
              <input type="text" class="form-control" formControlName="investigationReportDate" readonly>
            </div>
            <!-- end div for Investigation Report Date -->

            <!-- start div for Customer Code -->
            <div class="form-group col-xs-12 col-sm-6 col-md-6 col-lg-4">
                <label>Customer Code</label>
                <input type="text" class="form-control" formControlName="customerCode" readonly>
            </div>
            <!-- end div for Customer Code -->

            <!-- start div for Customer Name -->
            <div class="form-group col-xs-12 col-sm-6 col-md-6 col-lg-4">
                <label>Customer Name</label>
                <input type="text" class="form-control" formControlName="customerName" readonly>
            </div>
            <!-- end div for Customer Name -->


            <!-- start table div -->
            <div class="col-lg-12 col-md-12 col-xs-12 scroll-bar">
              <table class="table-style">
                <thead>
                  <tr class="th-style">
                    <td class="hideextra" *ngFor="let invItem of  itemGridTable" [ngClass]="invItem.headerClass">
                      {{ invItem.headerDesc }}
                    </td>
                  </tr>
                </thead>
                <tbody>
                  <tr class="tr-style" *ngFor="let invItemDet of invItemDetails">
                    <td class="hideextra" *ngFor="let itmGrid of itemGridTable" [ngClass]="itmGrid.dataClass">
                      <ng-container *ngIf="itmGrid.headerKey === 'complaintQtyInMtrs' then thenblock; else elseblock">
                      </ng-container>
                      <ng-template #thenblock>
                        <input type="number" value={{invItemDet[itmGrid.headerKey]}} />
                      </ng-template>
                      <ng-template #elseblock>
                        {{ invItemDet[itmGrid.headerKey] }}
                      </ng-template>
                    </td>
                  </tr>
                  <tr class="tr-style">
                    <!-- invItemDetails -->
                    <td class="td-style-first hideextra">
                      Add Item(s)
                      <i style="font-size:16px;cursor: pointer;" title="Click here" class="fa fa-plus-circle" (click)="onItemsOpenModal()"></i>
                    </td>
                    <td class="td-style">

                    </td>
                    <td class="td-style">

                    </td>
                    <td class="td-style">

                    </td>
                    <td class="td-style">

                    </td>
                    <td class="td-style">

                    </td>
                    <td class="td-style">

                    </td>
                    <td class="td-style">

                    </td>
                    <td class="td-style">

                    </td>
                    <td class="td-style">

                    </td>
                    <td class="td-style">

                    </td>
                    <td class="td-style-last">

                    </td>
                  </tr>
                </tbody>
              </table>
            </div>
            <!--end table div-->

            <div class="form-group col-xs-12 col-sm-12 col-md-12 col-lg-12" style="padding-bottom: 10px;">
            </div>

            <!--start div for Unloading Equipment [add]-->
            <div class="form-group col-xs-12 col-sm-6 col-md-6 col-lg-4">
              <label>Unloading Equipment</label>
              <ul class="list-group ul-style">
                <li class="list-group-item li-style" *ngFor="let unloadingEquipment of ivtReportDataList.unloadingEquipmentList">
                  <label class="custom-control custom-checkbox">
                    <input type="checkbox" class="custom-control-input" [checked]="unloadingEquipment.checked" (click)="onclickUnloadingEquipmentSelect(unloadingEquipment.id)"
                    />
                    <span class="custom-control-indicator"></span>
                    <span class="custom-control-description">
                      {{unloadingEquipment.desc}}
                    </span>
                  </label>
                </li>
              </ul>
            </div>
            <!--end div for Unloading Equipment [add]-->

            <!--start div for Lubricant Used [add]-->
            <div class="form-group col-xs-12 col-sm-6 col-md-6 col-lg-4">
              <label>Lubricant Used</label>
              <ul class="list-group ul-style">
                <li class="list-group-item li-style" *ngFor="let lubricantUsed of ivtReportDataList.lubricantUsedList">
                  <label class="custom-control custom-checkbox">
                    <input type="checkbox" class="custom-control-input" [checked]="lubricantUsed.checked" (click)="onclickLubricantUsedSelect(lubricantUsed.id)"
                    />
                    <span class="custom-control-indicator"></span>
                    <span class="custom-control-description">
                      {{lubricantUsed.desc}}
                    </span>
                  </label>
                </li>
              </ul>
            </div>
            <!--end div for Lubricant Used [add]-->

            <!--start div for Unloading Equipment [add]-->
            <div class="form-group col-xs-12 col-sm-6 col-md-6 col-lg-4">
              <label for="stencil">Laying Position</label>
              <ul class="list-group ul-style">
                <li class="list-group-item li-style" *ngFor="let layingPosition of ivtReportDataList.layingPositionList">
                  <label class="custom-control custom-checkbox">
                    <input type="checkbox" class="custom-control-input" [checked]="layingPosition.checked" (click)="onclickLayingPositionSelect(layingPosition.id)"
                    />
                    <span class="custom-control-indicator"></span>
                    <span class="custom-control-description">
                      {{layingPosition.desc}}
                    </span>
                  </label>
                </li>
              </ul>
            </div>
            <!--end div for Unloading Equipment [add]-->

            <!--start div for Unloading Equipment [add]-->
            <div class="form-group col-xs-12 col-sm-6 col-md-6 col-lg-4">
              <label for="stencil">Jointing Type</label>
              <ul class="list-group ul-style">
                <li class="list-group-item li-style" *ngFor="let jointingType of ivtReportDataList.jointingTypeList">
                  <label class="custom-control custom-checkbox">
                    <input type="checkbox" class="custom-control-input" [checked]="jointingType.checked" (click)="onclickJointingTypeListSelect(jointingType.id)"
                    />
                    <span class="custom-control-indicator"></span>
                    <span class="custom-control-description">
                      {{jointingType.desc}}
                    </span>
                  </label>
                </li>
              </ul>
            </div>
            <!--end div for Unloading Equipment [add]-->

            <!--start div for show files-->
            <!--files-->
            <div class="form-group col-xs-12 col-sm-6 col-md-6 col-lg-4" *ngIf="">
              <label>Uploaded file(s)</label>
              <div *ngFor="">
                <!-- <a href="{{file.fileUrl}}" target="_blank">{{file.fileName}}</a> -->
                <br/>
              </div>
            </div>
            <!--end div for show files-->

            <!--start fle upload div-->
            <div class="form-group col-xs-12 col-sm-6 col-md-6 col-lg-6">
              <label for="imageFile">File(s) Upload</label>
              <label class="red-coloured-label">(max size 100 mb)</label>
              <input type="file" (change)="fileChange($event)" multiple/>
            </div>
            <!--end of file upload div-->



            <!--start button div-->
            <div class="col-xs-12 col-sm-12 col-md-12 col-lg-12">
              <div class="col-xs-12 col-sm-4 col-md-4 col-lg-2 button-holder">
                <button type="submit" class="btn btn-primary primary-button-style" [disabled]="!invReportFormGroup.valid">Submit
                </button>
              </div>
              <div class="col-xs-12 col-sm-4 col-md-4 col-lg-2 button-holder">
                <button type="submit" class="btn default-button-style" (click)="onCancel()">
                  Cancel
                </button>
              </div>
            </div>
            <!--end of button div-->
          </div>
          <!--end of div form style-->
        </form>
        <!--end form -->

      </div>
      <!-- end div of form -->

    </div>
    <!-- end of main div -->
  </div>
  <!--end of page-container-->

  <!--spinner-->
  <ispl-busy-spinner *ngIf="busySpinner"></ispl-busy-spinner>